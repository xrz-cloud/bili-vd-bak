# 库

## 提示

- 请等待库2加载后再搜索。  
电脑端使用`Ctrl`+`F`搜索整页，手机端使用浏览器工具栏整页搜。  
- 点击库2的外部打开前，请先进入[库2主页](//share.xrzyun.top)预加载基本数据，否则会404。  
- [库2的帮助信息](//bili-vd-bak.notion.site/b23-f3d8d201a8dc46f7b04a33c53ccf2da4)

## 角标解释

- <Badge type="danger" text="弃更{已有集数}" />不再保存  
- <Badge type="warning" text="无弹幕" />即非B站保存，来源于ACG.RIP  

## 库1

- 施工中
- 已完结
  - [Little Busters](../lib/Little%20Busters/)
    - [库特wafter](../lib/Little%20Busters/库特wafter/)
  - [Lycoris Recoil](../lib/Lycoris%20Recoil/)
    - [第一季](../lib/Lycoris%20Recoil/第一季/)<Badge type="danger" text="弃更1-6" /><Badge type="warning" text="无弹幕" />
  - [Re：从零开始的异世界生活](../lib/Re：从零开始的异世界生活/)
    - [第二季](../lib/Re：从零开始的异世界生活/第二季/)
      - [前半](../lib/Re：从零开始的异世界生活/第二季/前半/)
      - [后半](../lib/Re：从零开始的异世界生活/第二季/后半/)
  - [打了300年的史莱姆，不知不觉就练到了满级](../lib/打了300年的史莱姆，不知不觉就练到了满级/)
    - [第一季](../lib/打了300年的史莱姆，不知不觉就练到了满级/第一季/)
  - [大正少女御伽话](../lib/大正少女御伽话/)
    - [第一季](../lib/大正少女御伽话/第一季/)
  - [工作细胞](../lib/工作细胞/)
    - [第一季](../lib/工作细胞/第一季/)
    - [第二季](../lib/工作细胞/第二季/)
    - [工作细胞BLACK](../lib/工作细胞/工作细胞BLACK/)
      - [第一季](../lib/工作细胞/工作细胞BLACK/第一季/)
  - [关于我转生变成史莱姆这档事](../lib/关于我转生变成史莱姆这档事/)
    - [第一季](../lib/关于我转生变成史莱姆这档事/第一季/)
    - [第二季](../lib/关于我转生变成史莱姆这档事/第二季/)
    - [转生史莱姆日记](../lib/关于我转生变成史莱姆这档事/转生史莱姆日记/)
      - [第一季](../lib/关于我转生变成史莱姆这档事/转生史莱姆日记/第一季/)
  - [汉化日记](../lib/汉化日记/)
    - [第二季](../lib/汉化日记/第二季/)
  - [辉夜大小姐想让我告白？](../lib/辉夜大小姐想让我告白？/)
    - [第三季](../lib/辉夜大小姐想让我告白？/第三季/)<Badge type="warning" text="无弹幕" />
  - [间谍过家家](../lib/间谍过家家/)
    - [第一季](../lib/间谍过家家/第一季/)<Badge type="danger" text="弃更1-3" /><Badge type="warning" text="无弹幕" />
  - [街角魔族](../lib/街角魔族/)
    - [第二季](../lib/街角魔族/第二季/)<Badge type="warning" text="无弹幕" />
  - [结城友奈是勇者(1-3季+SP)](../lib/结城友奈是勇者/)
  - [剧偶像](../lib/剧偶像/)
    - [第一季](../lib/剧偶像/第一季/)
  - [堀与宫村](../lib/堀与宫村/)
    - [第一季](../lib/堀与宫村/第一季/)
  - [魔女之旅](../lib/魔女之旅/)
    - [第一季](../lib/魔女之旅/第一季/)
  - [女孩的钓鱼慢活](../lib/女孩的钓鱼慢活/)
    - [第一季](../lib/女孩的钓鱼慢活/第一季/)<Badge type="warning" text="无弹幕" />
  - [漂流少年](../lib/漂流少年/)
    - [第一季](../lib/漂流少年/第一季/)
  - [请问您今天要来点兔子吗？](../lib/请问您今天要来点兔子吗？/)
    - [第三季](../lib/请问您今天要来点兔子吗？/第三季/)
  - [擅长捉弄的高木同学](../lib/擅长捉弄的高木同学/)
    - [第三季](../擅长捉弄的高木同学/第三季/)
  - [世界顶尖的暗杀者,转生为异世界贵族](../lib/世界顶尖的暗杀者,转生为异世界贵族/)
    - [第一季](../lib/世界顶尖的暗杀者,转生为异世界贵族/第一季/)
  - [突击莉莉 BOUQUET](../lib/突击莉莉%20BOUQUET/)
    - [第一季](../lib/突击莉莉%20BOUQUET/第一季/)
  - [薇薇 -萤石眼之歌-](../lib/薇薇%20-萤石眼之歌-/)
    - [第一季](../lib/薇薇%20-萤石眼之歌-/第一季/)
  - [我们的重制人生](../lib/我们的重制人生/)
    - [第一季](../lib/我们的重制人生/第一季/)
  - [无职转生～到了异世界就拿出真本事～](../lib/无职转生～到了异世界就拿出真本事～/)
    - [第一季](../lib/无职转生～到了异世界就拿出真本事～/第一季/)
      - [前半](../lib/无职转生～到了异世界就拿出真本事～/第一季/前半/)
      - [后半](../lib/无职转生～到了异世界就拿出真本事～/第一季/后半/)
      - [其它(NCOP NCED CDs menu)](../lib/无职转生～到了异世界就拿出真本事～/第一季/其它/)
  - [夏日重现](../lib/夏日重现/)
    - [第一季](../lib/夏日重现/第一季/)<Badge type="danger" text="弃更1-17" /><Badge type="warning" text="无弹幕" />
  - [约定的梦幻岛](../lib/约定的梦幻岛/)
    - [第二季](../lib/约定的梦幻岛/第二季/)<Badge type="danger" text="弃更1-2" />
  - [约会大作战](../lib/约会大作战/)
    - [第一季](../lib/约会大作战/第一季/)
    - [第二季](../lib/约会大作战/第二季/)
    - [剧场版](../lib/约会大作战/剧场版/)
    - [第三季](../lib/约会大作战/第三季/)
    - [狂三外传(枪弹大作战)](../lib/约会大作战/狂三外传(枪弹大作战)/)
  - [致不灭的你](../lib/致不灭的你/)
    - [第一季](../lib/致不灭的你/第一季/)
  - [转生成蜘蛛又怎样！](../lib/转生成蜘蛛又怎样！/)
    - [第一季](../lib/转生成蜘蛛又怎样！/第一季/)
  - [总之就是那么可爱](../lib/总之就是那么可爱/)
    - [第一季](../lib/总之就是那么可爱/第一季/)
  - [Ｄｒ．ＳＴＯＮＥ　石纪元](../lib/%EF%BC%A4%EF%BD%92%EF%BC%8E%EF%BC%B3%EF%BC%B4%EF%BC%AF%EF%BC%AE%EF%BC%A5%E3%80%80%E7%9F%B3%E7%BA%AA%E5%85%83/)
    - [第一季](../lib/%EF%BC%A4%EF%BD%92%EF%BC%8E%EF%BC%B3%EF%BC%B4%EF%BC%AF%EF%BC%AE%EF%BC%A5%E3%80%80%E7%9F%B3%E7%BA%AA%E5%85%83/第一季/)
    - [第二季](../lib/%EF%BC%A4%EF%BD%92%EF%BC%8E%EF%BC%B3%EF%BC%B4%EF%BC%AF%EF%BC%AE%EF%BC%A5%E3%80%80%E7%9F%B3%E7%BA%AA%E5%85%83/第二季/)

## 库2

[帮助信息](//bili-vd-bak.notion.site/b23-f3d8d201a8dc46f7b04a33c53ccf2da4)

<el-table :data="filterTableData" stripe height="500" style="width: 100%">
  <el-table-column prop="md" label="md" width="200" />
  <el-table-column prop="name" label="标题" width="300" />
  <el-table-column fixed="right" label="操作" width="150">
    <template #default="scope">
      <el-button
         link
         type="primary"
         size="small"
         @click.prevent="alertd(filterTableData[scope.$index].res)"
      >
        来源
      </el-button>
      <a :href="'//share.xrzyun.top' + '/md/' + filterTableData[scope.$index].md" target="_blank">外部打开</a>
    </template>
  </el-table-column>
</el-table>

<script setup lang="ts">
import { ElButton, ElTable, ElTableColumn } from "element-plus";
import { ref, reactive, computed } from "vue";
import fetch from "isomorphic-fetch";
const gapi = "https://b23.xrzapi.eu.org/api/graphql"

const data: { md: number; name: string; ffn: string; res: string }[] = reactive(
  []
);

function alertd(mes: string) {
  alert(mes);
}

const search = ref("");
const filterTableData = computed(() =>
  data
    .filter(
      (data) =>
        !search.value ||
        data.ffn.toString().toLowerCase().includes(search.value.toLowerCase())
    )
    .sort((a, b) => a.md - b.md)
);

let md_name_dic: { [key: string]: string } = reactive({});
async function getInfo() {
  const res_info = (
    await fetch(gapi, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        query: `query($path: String!) {
    od(path: $path) {
      raw {
        dlinks {
          dlink
        }
      }
    }
  }
`,
        variables: {
          path: "/index/md_name_dic.json",
        },
      }),
    }).then((res) => res.json())
  )?.data?.od?.raw?.dlinks[0]?.dlink;
  const info = await fetch(res_info).then((res) => res.json());
  md_name_dic = info;
}

async function getPages(drive: string, nextPageToken: string) {
  const result = await fetch(gapi, {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify({
      query: `query ($path: String!, $drive: String!, $nextPageToken: String!) {
    od(path: $path) {
      folder(drive: $drive, nextPageToken: $nextPageToken) {
        items {
          sharelink,
          folder {
            nextPageToken,
            value {
              name
            }
          }
        }
      }
    }
  }
`,
      variables: {
        path: "/index/md/",
        drive: drive,
        nextPageToken: nextPageToken,
      },
    }),
  }).then((res) => res.json());

  const items = result.data.od.folder.items;
  const i = items[0];
  const sharelink = i.sharelink,
    value = i.folder.value;
  for (const j of value) {
    data.push({
      md: Number(j.name), //完整文件名
      name: md_name_dic[j.name] || "",
      ffn: j.name + (md_name_dic[j.name] || ""),
      res: sharelink, //此集来源链接
    });
  }
  if (i.folder.nextPageToken) await getPages(drive, i.folder.nextPageToken);
}

async function main() {
  const result = await fetch(gapi, {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify({
    query: `
  {
    od(path: "/index/md/") {
      folder {
        items {
          sharelink,
          folder {
            nextPageToken,
            value {
              name
            }
          }
        }
      }
    }
  }
`,
    }),
  }).then((res) => res.json());

  await getInfo();

  const items = await result.data.od.folder.items;
  for (const i of items) {
    const sharelink = i.sharelink,
      value = i.folder.value;
    for (const j of value) {
      data.push({
        md: Number(j.name), //完整文件名
        name: md_name_dic[j.name] || "",
        ffn: j.name + (md_name_dic[j.name] || ""),
        res: sharelink, //此集来源链接
      });
    }
    if (i.folder.nextPageToken)
      await getPages(sharelink, i.folder.nextPageToken);
  }
}
main();
</script>
